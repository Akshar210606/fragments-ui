{"mappings":"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","sources":["src/app.js","src/auth.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/fragments.js","src/api.js"],"sourcesContent":["import { login, logout, getUser } from \"./auth.js\";\r\nimport { updateList, createFragment } from \"./fragments.js\";\r\n\r\ndocument.getElementById(\"login\").onclick = login;\r\ndocument.getElementById(\"logout\").onclick = logout;\r\ndocument.getElementById(\"refresh\").onclick = updateList;\r\ndocument.getElementById(\"create\").onclick = async () => {\r\n  const type = document.getElementById(\"type\").value;\r\n  const content = document.getElementById(\"content\").value;\r\n  await createFragment(type, content);\r\n};\r\n\r\nconst user = getUser();\r\nconst userDisplay = document.getElementById(\"user\");\r\n\r\nif (user) {\r\n  userDisplay.textContent = `Logged in as ${user.email}`;\r\n  document.getElementById(\"login\").style.display = \"none\";\r\n  document.getElementById(\"logout\").style.display = \"inline\";\r\n  updateList();\r\n} else {\r\n  userDisplay.textContent = \"Not logged in\";\r\n  document.getElementById(\"login\").style.display = \"inline\";\r\n  document.getElementById(\"logout\").style.display = \"none\";\r\n}\r\n","// src/auth.js\r\n\r\n// === Your Cognito Hosted UI configuration ===\r\nconst domain = \"us-east-1ov4f5m5t2.auth.us-east-1.amazoncognito.com\";\r\nconst clientId = \"7tugjqis2m9jqalm2gmmkgjrr1\";\r\nconst redirectUri = \"http://localhost:1234\";\r\nconst logoutUri = \"http://localhost:1234\";\r\n\r\n// === Construct login/logout URLs ===\r\nconst cognitoAuthUrl = `https://${domain}/login?client_id=${clientId}&response_type=token&scope=openid+email+profile&redirect_uri=${redirectUri}`;\r\nconst cognitoLogoutUrl = `https://${domain}/logout?client_id=${clientId}&logout_uri=${logoutUri}`;\r\n\r\n// === Redirect to Cognito Hosted UI ===\r\nexport function login() {\r\n  console.log(\"Redirecting to:\", cognitoAuthUrl);\r\n  window.location.href = cognitoAuthUrl;\r\n}\r\n\r\n// === Logout and clear token ===\r\nexport function logout() {\r\n  localStorage.removeItem(\"idToken\");\r\n  localStorage.removeItem(\"user\");\r\n  window.location.href = cognitoLogoutUrl;\r\n}\r\n\r\n// === Parse token from URL after login ===\r\nexport function getUserToken() {\r\n  const hash = window.location.hash;\r\n  if (hash.includes(\"id_token\")) {\r\n    const token = new URLSearchParams(hash.substring(1)).get(\"id_token\");\r\n    localStorage.setItem(\"idToken\", token);\r\n    window.history.replaceState({}, document.title, \"/\");\r\n    return token;\r\n  }\r\n  return localStorage.getItem(\"idToken\");\r\n}\r\n\r\n// === Decode user info ===\r\nexport function getUser() {\r\n  const token = getUserToken();\r\n  if (!token) return null;\r\n\r\n  try {\r\n    const payload = JSON.parse(atob(token.split(\".\")[1]));\r\n    const user = { email: payload.email, name: payload.name };\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    return user;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","// src/fragments.js\r\nimport { apiRequest } from \"./api.js\";\r\n\r\nexport async function updateList() {\r\n  try {\r\n    const res = await apiRequest(\"/v1/fragments?expand=1\");\r\n    const data = await res.json();\r\n\r\n    const list = document.getElementById(\"list\");\r\n    list.innerHTML = \"\";\r\n\r\n    if (!data.fragments || data.fragments.length === 0) {\r\n      list.innerHTML = \"<li>No fragments found</li>\";\r\n      return;\r\n    }\r\n\r\n    data.fragments.forEach((frag) => {\r\n      const li = document.createElement(\"li\");\r\n      li.textContent = `${frag.id} (${frag.type}, ${frag.size} bytes)`;\r\n      list.appendChild(li);\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Error loading fragments:\", err);\r\n  }\r\n}\r\n\r\nexport async function createFragment(type, content) {\r\n  try {\r\n    const res = await apiRequest(\"/v1/fragments\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": type },\r\n      body: content,\r\n    });\r\n\r\n    if (res.ok) {\r\n      alert(\"✅ Fragment created successfully!\");\r\n      await updateList();\r\n    } else {\r\n      const errorText = await res.text();\r\n      alert(`❌ Error creating fragment: ${errorText}`);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error creating fragment:\", err);\r\n  }\r\n}\r\n","// src/api.js\r\n\r\n// Use your EC2 fragments API URL\r\nexport const API_URL = \"http://ec2-52-206-187-39.compute-1.amazonaws.com:8080\";\r\n\r\n/**\r\n * Helper to make authenticated requests\r\n */\r\nexport async function apiRequest(path, options = {}) {\r\n  const token = localStorage.getItem(\"idToken\");\r\n  const headers = options.headers || {};\r\n\r\n  if (token) {\r\n    headers[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n\r\n  return fetch(`${API_URL}${path}`, { ...options, headers });\r\n}\r\n"],"names":[],"version":3,"file":"fragments-ui.0f77c784.js.map","sourceRoot":"/__parcel_source_root/"}